<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-09ZV4X8NVV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-09ZV4X8NVV');
    </script>
    -->

    <meta charset="UTF-8">

    <link rel="manifest" href="manifest.json" />

    <!-- preload -->
    <link rel="preload" href="svg/u1f431.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f63d.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f63b.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f408.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f349.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f370.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f369.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f365.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f364.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f363.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f359.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f96a.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f355.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f95e.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f638.svg" as="image" type="image/svg+xml">


    <!-- lunar new year -->
    <link rel="preload" href="svg/u1f3ee.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f40d.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f311.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f95f.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f34a.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f343.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f9cb.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f9e7.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f9e8.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f534.svg" as="image" type="image/svg+xml">

    <!-- halloween -->
    <!--
    <link rel="preload" href="svg/u1f640.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f577.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f383.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f987.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1fab1.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f578.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f36b.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f36c.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f36d.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f47b.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="svg/u1f480.svg" as="image" type="image/svg+xml">
    -->

    <!-- ios support -->
    <link rel="apple-touch-icon" href="images/icons/icon-72x72.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-96x96.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-128x128.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-144x144.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-152x152.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-384x384.png" />
    <link rel="apple-touch-icon" href="images/icons/icon-512x512.png" />
    <meta name="apple-mobile-web-app-status-bar" content="#f9f9f9" />
    <meta name="theme-color" content="#f9f9f9" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>Purrdle</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"
        type="text/javascript"></script>

    <link rel="stylesheet" href="style.css?v=20250129">
</head>

<body class="loading">

    <!-- ko if: debug -->
    <p class="small" style="height: 48px; margin-top: -48px; margin-bottom:0">
        <a id="exporter">Download Data</a>
        |
        <input type="file" id="import-data" onchange="importData()" style="display:none"/>
        <label for="import-data"><a>Import Data</a></label>
        |
        <span onclick="accountSetup()">Account Sync</span>
        |
        <span onclick="clearLocalData()">Clear All Data</span>
        |
        <span onclick="addDummyDay()">Add Test Day</span>
    </p>
    <!-- /ko -->

    <div class="loader"></div>

    <!-- ko if: accountSetup() -->
    <div class="modal" data-bind="">
        <div class="logo emoji" data-bind="class: yearPlayed() ? 'cake' : ''"></div><!-- data-bind="click: recover"></div> -->
        <div>
            <h1>Purrdle</h1><!--<span>üê£ Holiday Edition üê£</span>-->
        </div>
        <h1>Days: <span data-bind="text: numDays()"></span> </h1>
        <!-- ko if: synced() -->
            <p>Currently Synced with phrase:</p>
            <p class="phrase" data-bind="text: currentPhrase"></p>
        <!-- /ko -->
        <!-- ko if: !synced() -->
            <!-- ko if: !creatingAccount() && !connectingAccount() -->
                <p>Your progress is not currently synced to the server.</p>
                <p>Sync your progress with the server?</p>
                <button data-bind="click: createAccount">Create Account</button>
                <button data-bind="click: connectToAccount">Use Existing Account</button>
            <!-- /ko -->
            <!-- ko if: creatingAccount() -->
                <!-- ko if: candidatePhrase() && !fetching() -->
                    <p>Your account phrase is:</p>
                    <p class="phrase" data-bind="text: candidatePhrase"></p>
                    <p>Write this down, it's all you need to reconnect to your account from any device!</p>
                    <p>If you don't like this phrase you can try another.</p>
                    <button data-bind="click: newCandidatePhrase">Try another</button>
                    <button data-bind="click: acceptPhrase">Ok</button>
                <!-- /ko -->
                <!-- ko if: !candidatePhrase() && fetching() -->
                    <p>Fetching account phrase...</p>
                <!-- /ko -->
                <!-- ko if: candidatePhrase() && fetching() -->
                    <p>Creating Account...</p>
                <!-- /ko -->
            <!-- /ko -->
            <!-- ko if: connectingAccount() -->
                <!-- ko if: !fetching() -->
                    <p>Enter your existing account phrase:</p>
                    <p><input class="phrase-input" type="text" data-bind="textInput: candidatePhrase"></p>
                    <!-- ko if: error() -->
                        <p class="error" data-bind="text: error"></p>
                    <!-- /ko -->
                    <button data-bind="click: tryConnect">Ok</button>
                <!-- /ko -->
                <!-- ko if: fetching() -->
                    <p>Connecting to account...</p>
                <!-- /ko -->
            <!-- /ko -->
        <!-- /ko -->
    </div>
    <!-- /ko -->

    <!-- ko ifnot: accountSetup() -->

    <div class="modal" data-bind="visible: !started()">
        <div class="logo emoji" data-bind="class: yearPlayed() ? 'cake' : ''"></div><!-- data-bind="click: recover"></div> -->
        <div>
            <h1>Purrdle</h1>
            <span data-bind="visible: holiday, text: holidayText"></span>
            <p data-bind="text: dateString()"></p>
        </div>
        <!--<p>Guess what each cat wants!</p>-->

        <div class="howtoplay">
            <!-- ko if: yearPlayed -->
                <p>
                    Congratulations on your 365th day playing Purrdle!
                </p>
                <p>We really appreciate your suppawt.</p>
            <!-- /ko -->
            <!-- ko ifnot: yearPlayed -->
                <ul style="text-align: left; margin: 8px">
                    <li>Find each cat's favorite <span data-bind="text: itemCategory"></span></li>
                    <li>Cats look towards their favorite <span data-bind="text: itemCategory"></span></li>
                    <li>Cats hide if their favorite <span data-bind="text: itemCategory"></span> isn't present</li>
                    <li>More than one cat can have the same favorite <span data-bind="text: itemCategory"></span></li>
                </ul>
            <!-- /ko -->
            <button data-bind="click: start, clickBubble: false">Play</button>
        </div>
        <div>
            <!--<p class="small">Design by <a href="https://twitter.com/nickograms">Nickograms</a></p>-->
            <p class="small">Copyright 2024, <a href="https://hungrysky.com">Hungry Sky Pty Ltd</a></p>
            <p class="small">Please send bug reports to: <a href="mailto:support@purrdle.app">support@purrdle.app</a>
        </div>
    </div>

    <div class="modal" data-bind="visible: ended()">
        <div class="logo emoji" data-bind="class: 'cat_' + $root.cat()"></div>
        <h1>Purrdle</h1>
        <span data-bind="visible: holiday, text: holidayText"></span>
        <div>
            <p data-bind="text: dateString()"></p>
        </div>
        <div data-bind="if: won">
            <h3>Con-cat-ulations!</h3>
            <!-- ko if: yearPlayed -->
                <p data-bind="visible: timeEnd() != -1">Solved in <span data-bind="text: timeString()"></span></p>
                <!-- bugfix for not storing timeEnd -->
                <p>You've had happy cats for a whole year!</p>
            <!-- /ko -->
            <!-- ko ifnot: yearPlayed -->
                <p data-bind="visible: timeEnd() != -1">Solved in <span data-bind="text: timeString()"></span></p>
                <!-- bugfix for not storing timeEnd -->
                <p>You've had happy cats for <span data-bind="text: numDays()"></span> day(s).</p>
                <p>Come play again tomorrow!</p>
            <!-- /ko -->
            <button data-bind="click: share, clickBubble: false, ">Share</button>
        </div>
        <!-- ko if: yearPlayed -->
            <div class="cake-hero"></div>
        <!-- /ko -->
        <!-- ko ifnot: yearPlayed -->
            <div>
                <p>Try our other puzzle game: <br><a href="https://hungrysky.com/nekograms"><img src="images/nekograms.png" class="referral"></a></p>
            </div>
        <!-- /ko -->
    </div>
    <!-- /ko -->

    <main>
        <header>
            <h1 class="help" data-bind="click: help, clickBubble: false">?</h1>
            <h1 class="title">Purrdle</h1>
            <span data-bind="visible: holiday, text: holidayText"></span>
        </header>

        <div id="guesses" data-bind="foreach: guesses">
            <div class="guess"
                data-bind="foreach: $data, css: { previous: $index() == $root.guessRow() - 1, current: $index() === $root.guessRow() && !$root.won() }">
                <div class="cell">
                    <div class="cat emoji"
                        data-bind="class: status() + ' cat_' + $index(), css: { current : $index() === $root.guessCol() }">
                    </div>
                    <div class="food emoji"
                        data-bind="class: 'food_' + $root.foods()[sample()] + ' ' + status(), css: { current : $index() === $root.guessCol() }">
                    </div>
                </div>
            </div>
        </div>

        <div id="palette" data-bind="foreach: palette">
            <div class="cell">
                <div class="food emoji"
                    data-bind="class: 'food_' + $root.foods()[sample], click: $root.chooseSample, clickBubble: false, "></div>
            </div>
        </div>

        <footer>
            <div data-bind="if: ($root.guessCol() === 0 && $root.won() === false && $root.lost() === false)">
                <p>Select items for the five cats</p>
            </div>
            <span data-bind="if: $root.guessCol() > 0">
                <span data-bind="ifnot: $root.won()">
                    <button class="undo"
                        data-bind="click: back, clickBubble: false, enable: $root.guessCol() > 0">Undo</button>
                    <span data-bind="if: $root.guessCol() > 4">
                        <button class="submit" data-bind="click: submitGuess, clickBubble: false">Submit</button>
                    </span>
                </span>
            </span>
            <span data-bind="if: $root.won()">
                <button class="purrdle" , data-bind="click: end, clickBubble: false">NICE!</button>
            </span>
            <span data-bind="if: $root.lost()">
                Keep trying?
                <button data-bind="click: restart, clickBubble: false">Yes!</button>
            </span>
        </footer>
    </main>
</body>
<script src="script.js?v=20250129" type="text/javascript"></script>
</html>
